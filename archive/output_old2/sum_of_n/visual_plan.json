{
  "manim_code": "def construct(self):\n    # HOOK\n    title = Text(\"Sum of the first n numbers\", font_size=48)\n    title.to_edge(UP, buff=0.5)\n    self.play(Write(title), run_time=1.0)\n    self.wait(1.5)\n\n    subtitle = Text(\"1 + 2 + 3 + ... + n\", font_size=36, color=YELLOW)\n    subtitle.move_to(DOWN * 0.5)\n    self.play(Write(subtitle), run_time=0.8)\n    self.wait(1)\n\n    # BUILD: staircase of dots\n    self.play(FadeOut(subtitle), run_time=0.5)\n\n    n = 5  # small n for clarity in 45s animation\n    dot_radius = 0.09\n    spacing = 0.35\n\n    staircase = VGroup()\n    for row in range(1, n + 1):\n        row_group = VGroup()\n        for k in range(row):\n            d = Dot(radius=dot_radius, color=BLUE)\n            # bottom row (row=1) at y = -2, each row above it\n            y = -2 + (row - 1) * spacing\n            # center each row horizontally around x = -2\n            total_width = (row - 1) * spacing\n            x_start = -2 - total_width / 2\n            x = x_start + k * spacing\n            d.move_to([x, y, 0])\n            row_group.add(d)\n        staircase.add(row_group)\n\n    stair_label = Text(\"Arrange as a staircase\", font_size=30, color=YELLOW)\n    stair_label.to_edge(DOWN, buff=0.6)\n\n    # Reveal staircase row by row\n    self.play(Write(stair_label), run_time=0.8)\n    for row_group in staircase:\n        self.play(LaggedStartMap(FadeIn, row_group, lag_ratio=0.1), run_time=0.6)\n    self.wait(1)\n\n    # REVEAL: create a second copy and form rectangle\n    self.play(FadeOut(stair_label), run_time=0.5)\n\n    staircase_copy = staircase.copy().set_color(RED)\n\n    # Position original staircase more to the left\n    staircase_target = staircase.copy()\n    staircase_target.shift(LEFT * 1.5 + UP * 0.5)\n\n    # Position copy to form rectangle: rotated and mirrored around diagonal idea\n    rect_group = VGroup()\n    for row in range(n):\n        # original row\n        orig_row = staircase_target[row]\n        rect_group.add(orig_row)\n\n    # Build target layout for the copy: reverse the rows and align to make n by n+1\n    copy_target = VGroup()\n    for row in range(n):\n        source_row = staircase_copy[n - 1 - row]\n        new_row = VGroup()\n        for k, dot in enumerate(source_row):\n            new_dot = dot.copy()\n            # We want a rectangle of height n and width n+1\n            # Place dots in a grid with coordinates (col, row)\n            y = -0.2 + (row - n / 2) * spacing\n            x = 1.0 + (k - (n - 1) / 2) * spacing\n            new_dot.move_to([x, y, 0])\n            new_row.add(new_dot)\n        copy_target.add(new_row)\n\n    # Also move original staircase dots into the same rectangle grid\n    orig_target = VGroup()\n    for row in range(n):\n        row_group = VGroup()\n        for col, dot in enumerate(staircase[row]):\n            new_dot = dot.copy()\n            y = -0.2 + (row - n / 2) * spacing\n            # shift original to fill from left side of rectangle\n            x = 1.0 + (col - (n - 1) / 2 - 0.5) * spacing\n            new_dot.move_to([x, y, 0])\n            row_group.add(new_dot)\n        orig_target.add(row_group)\n\n    # Animate move to rectangle\n    self.play(\n        Transform(staircase, orig_target),\n        Transform(staircase_copy, copy_target),\n        run_time=2.0,\n    )\n\n    combined_rect = VGroup()\n    for g in orig_target:\n        combined_rect.add(*g)\n    for g in copy_target:\n        combined_rect.add(*g)\n\n    self.wait(1.5)\n\n    # Highlight rectangle dimensions n by (n+1)\n    # Draw a rectangle around the dots\n    width = (n + 1) * spacing * 1.05\n    height = n * spacing * 1.05\n    outline = Rectangle(width=width, height=height, color=YELLOW)\n    outline.move_to([1.0, -0.2, 0])\n\n    self.play(Create(outline), run_time=1.2)\n\n    dim_n = Text(\"n\", font_size=32, color=YELLOW)\n    dim_n.move_to(outline.get_left() + LEFT * 0.4)\n\n    dim_n1 = Text(\"n + 1\", font_size=32, color=YELLOW)\n    dim_n1.move_to(outline.get_top() + UP * 0.4)\n\n    self.play(Write(dim_n), Write(dim_n1), run_time=0.8)\n    self.wait(2)\n\n    # REINFORCE: connect area to sum\n    explain = Text(\"Two copies of the sum form this n by (n+1) rectangle\", font_size=28)\n    explain.to_edge(DOWN, buff=0.6)\n    self.play(Write(explain), run_time=1.2)\n    self.wait(2)\n\n    # Show division by 2 idea\n    self.play(FadeOut(explain), run_time=0.5)\n    half_label = Text(\"So one copy has half the dots:\", font_size=30)\n    half_label.to_edge(DOWN, buff=0.6)\n    self.play(Write(half_label), run_time=0.8)\n\n    formula = Text(\"1 + 2 + ... + n = n(n+1)/2\", font_size=40, color=GREEN)\n    formula.move_to(DOWN * 1.5)\n    self.play(Write(formula), run_time=1.2)\n    self.wait(2.5)\n\n    # CONCLUDE: clean ending\n    self.play(\n        FadeOut(half_label),\n        FadeOut(staircase),\n        FadeOut(staircase_copy),\n        FadeOut(outline),\n        FadeOut(dim_n),\n        FadeOut(dim_n1),\n        title.animate.to_edge(UP, buff=0.5),\n        run_time=1.0,\n    )\n\n    final_takeaway = Text(\"Sum of first n numbers = n(n+1)/2\", font_size=42, color=GREEN)\n    final_takeaway.move_to(ORIGIN)\n    self.play(ReplacementTransform(formula, final_takeaway), run_time=1.0)\n    self.wait(2)",
  "estimated_duration": 45
}