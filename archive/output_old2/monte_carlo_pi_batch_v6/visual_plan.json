{
  "manim_code": "import random\nfrom manim import *\n\nclass MonteCarloPi(Scene):\n    def construct(self):\n        # 1. Setup Title\n        title = Text(\"Throwing Darts to Find Pi\", font_size=56)\n        # Start at center\n        self.play(Write(title))\n        self.wait(1.5)\n        # Move to top\n        self.play(title.animate.scale(0.7).to_edge(UP, buff=0.3))\n\n        # 2. Geometry Setup (Left Side)\n        # Position shapes on the LEFT to save room for counters on RIGHT\n        # Canvas width is 14 (-7 to 7). Let's center geometry at x = -3.5\n        geo_center_pos = LEFT * 3.5 + DOWN * 0.5\n        \n        # Square side 5.0 (radius 2.5) fits well within vertical bounds\n        square_side = 5.0\n        radius = 2.5\n        \n        square = Square(side_length=square_side, color=WHITE)\n        square.move_to(geo_center_pos)\n        \n        circle = Circle(radius=radius, color=BLUE)\n        circle.move_to(geo_center_pos)\n        \n        # Labels\n        lbl_sq = Text(\"Side = 2r\", font_size=24, color=GRAY).next_to(square, UP, buff=0.1)\n        lbl_circ = Text(\"Radius = r\", font_size=24, color=BLUE).next_to(circle.get_right(), LEFT, buff=0.5)\n        \n        self.play(Create(square), FadeIn(lbl_sq))\n        self.play(Create(circle), Write(lbl_circ))\n        self.wait(1)\n\n        # 3. Counters & Formula Setup (Right Side)\n        # Position text on the RIGHT side (x > 0)\n        x_text = 3.5\n        \n        # Initial texts\n        txt_total = Text(\"Total Points: 0\", font_size=36).set_x(x_text).set_y(2.0)\n        txt_inside = Text(\"Inside Circle: 0\", font_size=36, color=GREEN).set_x(x_text).set_y(1.2)\n        \n        # Formula\n        formula_text = Text(\"\u03c0 \u2248 4 \u00d7 (Inside / Total)\", font_size=36).set_x(x_text).set_y(0.0)\n        \n        # Result\n        txt_pi = Text(\"\u03c0 \u2248 ???\", font_size=72, color=YELLOW).set_x(x_text).set_y(-2.0)\n\n        self.play(Write(txt_total), Write(txt_inside))\n        self.wait(0.5)\n        self.play(Write(formula_text))\n        self.play(Write(txt_pi))\n        self.wait(1)\n        \n        # Clean up geometry labels to reduce clutter\n        self.play(FadeOut(lbl_sq), FadeOut(lbl_circ))\n\n        # 4. Slow Simulation Phase\n        # Show individual dots appearing and logic\n        \n        # Variables\n        total = 0\n        inside = 0\n        \n        # Manual points for demonstration (relative to center)\n        # 2.5 is the boundary\n        demo_points = [\n            (0.5, 0.5, True),    # Clearly Inside\n            (2.2, 2.2, False),   # Corner (Outside)\n            (-1.0, 1.5, True),   # Inside\n            (-2.3, -2.3, False), # Corner\n            (0.0, -2.0, True),   # Inside\n        ]\n        \n        dots_group = VGroup() # Keep track of dots\n\n        for dx, dy, is_in in demo_points:\n            total += 1\n            if is_in:\n                inside += 1\n                col = GREEN\n            else:\n                col = RED\n            \n            # Create dot\n            pt_pos = geo_center_pos + RIGHT * dx + UP * dy\n            dot = Dot(point=pt_pos, color=col, radius=0.1)\n            \n            # Animate dot\n            self.play(FadeIn(dot, scale=0.5), run_time=0.4)\n            dots_group.add(dot)\n            \n            # Update counters\n            new_total = Text(f\"Total Points: {total}\", font_size=36).move_to(txt_total)\n            new_inside = Text(f\"Inside Circle: {inside}\", font_size=36, color=GREEN).move_to(txt_inside)\n            \n            # Calculate Pi\n            val = 4.0 * (inside / total)\n            new_pi = Text(f\"\u03c0 \u2248 {val:.2f}\", font_size=72, color=YELLOW).move_to(txt_pi)\n            \n            self.play(\n                Transform(txt_total, new_total),\n                Transform(txt_inside, new_inside),\n                Transform(txt_pi, new_pi),\n                run_time=0.5\n            )\n            \n            # Pause to let viewer digest\n            self.wait(0.8)\n\n        # 5. Fast Simulation (Speeding Up)\n        # Visual Transition: Fill the shapes to simulate millions of dots\n        \n        msg = Text(\"Speeding up...\", font_size=48, color=ORANGE).move_to(geo_center_pos)\n        self.play(FadeIn(msg))\n        self.wait(1)\n        self.play(FadeOut(msg))\n        \n        # Create filled shapes: Red square background, Green circle foreground\n        # This effectively colors outside-circle regions Red and inside-circle regions Green\n        fill_square = Square(side_length=square_side, color=RED, fill_opacity=0.4, stroke_width=0).move_to(geo_center_pos)\n        fill_circle = Circle(radius=radius, color=GREEN, fill_opacity=0.4, stroke_width=0).move_to(geo_center_pos)\n        \n        # Add some random dots for texture\n        texture_dots = VGroup()\n        for _ in range(50):\n            rx = random.uniform(-2.4, 2.4)\n            ry = random.uniform(-2.4, 2.4)\n            p = geo_center_pos + RIGHT*rx + UP*ry\n            c = GREEN if (rx**2 + ry**2 <= radius**2) else RED\n            texture_dots.add(Dot(p, color=c, radius=0.05))\n            \n        self.play(\n            FadeIn(fill_square),\n            FadeIn(fill_circle),\n            FadeIn(texture_dots),\n            run_time=2\n        )\n        \n        # Rolling numbers animation\n        # We simulate the convergence without calculating millions of points in Python\n        checkpoints = [\n            (100, 78, \"3.120\"),\n            (500, 393, \"3.144\"),\n            (2000, 1571, \"3.142\"),\n            (10000, 7853, \"3.141\"),\n            (50000, 39270, \"3.14159\")\n        ]\n        \n        for t, i, p_str in checkpoints:\n            # Directly replace text objects for speed\n            nt = Text(f\"Total Points: {t}\", font_size=36).set_x(x_text).set_y(2.0)\n            ni = Text(f\"Inside Circle: {i}\", font_size=36, color=GREEN).set_x(x_text).set_y(1.2)\n            np_val = Text(f\"\u03c0 \u2248 {p_str}\", font_size=72, color=YELLOW).set_x(x_text).set_y(-2.0)\n            \n            self.remove(txt_total, txt_inside, txt_pi)\n            txt_total = nt\n            txt_inside = ni\n            txt_pi = np_val\n            self.add(txt_total, txt_inside, txt_pi)\n            \n            self.wait(0.5)\n            \n        self.wait(1.5)\n        \n        # 6. Conclusion: Morph everything into final statement\n        final_statement = Text(\"\u03c0 \u2248 3.14159\", font_size=80, color=YELLOW).move_to(ORIGIN)\n        \n        # Collect all visible objects\n        # Note: 'dots_group' is still there, plus filled shapes, plus text\n        all_visible = VGroup(\n            title, square, circle, dots_group, texture_dots, fill_square, fill_circle,\n            txt_total, txt_inside, formula_text, txt_pi\n        )\n        \n        self.play(ReplacementTransform(all_visible, final_statement), run_time=2.0)\n        self.wait(3)\n",
  "estimated_duration": 55
}