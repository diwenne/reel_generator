{
  "manim_code": "def construct(self):\n    # 1. Setup Title\n    title = Text(\"How Recursion Works\", font_size=56)\n    title.to_edge(UP, buff=0.4)\n    self.play(Write(title))\n    self.wait(1.5)\n\n    # 2. Build the Call Stack (Descending)\n    # Positioning constants\n    x_stack = -2.0\n    x_result = 2.5\n    y_start = 2.2\n    y_step = 1.5\n    \n    # Create stack frames\n    frames = VGroup()\n    labels = VGroup()\n    arrows = VGroup()\n    \n    # Function to make a frame\n    def make_frame(val, y_pos):\n        rect = Rectangle(width=3.0, height=1.0, color=BLUE)\n        rect.move_to([x_stack, y_pos, 0])\n        label = Text(f\"f({val})\", font_size=44)\n        label.move_to(rect.get_center())\n        return rect, label\n\n    # Frame 4 (Top)\n    r4, l4 = make_frame(4, y_start)\n    frame4 = VGroup(r4, l4)\n    self.play(Create(r4), Write(l4))\n    self.wait(0.5)\n\n    # Frame 3\n    arrow1 = Arrow(start=[x_stack, y_start - 0.6, 0], end=[x_stack, y_start - y_step + 0.6, 0], color=GRAY)\n    r3, l3 = make_frame(3, y_start - y_step)\n    frame3 = VGroup(r3, l3)\n    self.play(GrowArrow(arrow1))\n    self.play(Create(r3), Write(l3))\n    self.wait(0.5)\n\n    # Frame 2\n    arrow2 = Arrow(start=[x_stack, y_start - y_step - 0.6, 0], end=[x_stack, y_start - 2*y_step + 0.6, 0], color=GRAY)\n    r2, l2 = make_frame(2, y_start - 2*y_step)\n    frame2 = VGroup(r2, l2)\n    self.play(GrowArrow(arrow2))\n    self.play(Create(r2), Write(l2))\n    self.wait(0.5)\n\n    # Frame 1 (Bottom)\n    arrow3 = Arrow(start=[x_stack, y_start - 2*y_step - 0.6, 0], end=[x_stack, y_start - 3*y_step + 0.6, 0], color=GRAY)\n    r1, l1 = make_frame(1, y_start - 3*y_step)\n    frame1 = VGroup(r1, l1)\n    self.play(GrowArrow(arrow3))\n    self.play(Create(r1), Write(l1))\n    self.wait(1.5)\n\n    # Group all structure for later transformation\n    stack_structure = VGroup(frame4, frame3, frame2, frame1, arrow1, arrow2, arrow3)\n\n    # 3. Base Case\n    base_text = Text(\"Base Case: Return 1\", font_size=40, color=GREEN)\n    base_text.next_to(frame1, RIGHT, buff=0.5)\n    self.play(Write(base_text))\n    self.play(frame1.animate.set_color(GREEN), run_time=0.5)\n    self.wait(1.5)\n\n    # Simplify base case text to just number for calculation\n    val1 = Text(\"1\", font_size=56, color=GREEN)\n    val1.move_to([x_result, y_start - 3*y_step, 0])\n    self.play(ReplacementTransform(base_text, val1))\n    self.wait(1)\n\n    # 4. Unwinding the Stack (Ascending)\n    \n    # f(2) returns 2 * 1\n    calc2 = Text(\"2 * 1 =\", font_size=40, color=WHITE)\n    res2 = Text(\"2\", font_size=56, color=GREEN)\n    calc_group2 = VGroup(calc2, res2).arrange(RIGHT, buff=0.2)\n    calc_group2.move_to([x_result, y_start - 2*y_step, 0])\n    \n    # Animate calculation\n    self.play(frame2.animate.set_color(YELLOW))\n    self.play(Write(calc2))\n    self.wait(0.5)\n    # Move the '1' up to multiply\n    copy1 = val1.copy()\n    self.play(Transform(copy1, res2), FadeOut(calc2))\n    # Now we have just the result '2' sitting there\n    final_res2 = res2 # Name it clearly\n    self.add(final_res2) # Ensure it's added\n    self.remove(copy1) # Clean up transform artifact\n    self.wait(1)\n\n    # f(3) returns 3 * 2\n    calc3 = Text(\"3 * 2 =\", font_size=40, color=WHITE)\n    res3 = Text(\"6\", font_size=56, color=GREEN)\n    calc_group3 = VGroup(calc3, res3).arrange(RIGHT, buff=0.2)\n    calc_group3.move_to([x_result, y_start - y_step, 0])\n    \n    self.play(frame3.animate.set_color(YELLOW))\n    self.play(Write(calc3))\n    self.wait(0.5)\n    # Move '2' up\n    copy2 = final_res2.copy()\n    self.play(Transform(copy2, res3), FadeOut(calc3))\n    final_res3 = res3\n    self.add(final_res3)\n    self.remove(copy2)\n    self.wait(1)\n\n    # f(4) returns 4 * 6\n    calc4 = Text(\"4 * 6 =\", font_size=40, color=WHITE)\n    res4 = Text(\"24\", font_size=56, color=GREEN)\n    calc_group4 = VGroup(calc4, res4).arrange(RIGHT, buff=0.2)\n    calc_group4.move_to([x_result, y_start, 0])\n\n    self.play(frame4.animate.set_color(YELLOW))\n    self.play(Write(calc4))\n    self.wait(0.5)\n    # Move '6' up\n    copy3 = final_res3.copy()\n    self.play(Transform(copy3, res4), FadeOut(calc4))\n    final_res4 = res4\n    self.add(final_res4)\n    self.remove(copy3)\n    self.wait(2)\n\n    # 5. Conclusion\n    # Create final statement\n    final_eq = Text(\"4! = 24\", font_size=72, color=YELLOW)\n    final_eq.move_to(ORIGIN)\n\n    # Gather everything visible\n    all_visible = VGroup(\n        title, \n        stack_structure, \n        val1, final_res2, final_res3, final_res4\n    )\n\n    # Morph into final result\n    self.play(ReplacementTransform(all_visible, final_eq), run_time=2.0)\n    self.wait(3)",
  "estimated_duration": 42
}